<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet">
  </head>

  <body>

    <p>Discover Music Thats Trending in Other Countries</p>
    <form>
      <select class="dropdown" id="mySelect">
        <option>Select a Country</option>
        <option>us</option>
        <option>au</option>
        <option>br</option>
        <option>mx</option>
      </select>
      <input class= "coloredbutton" type="button" onclick="getRawData()" value="Enter">
    </form>
    

    <p id="results"></p>

    <script type="text/javascript">

      function getRawData(){

        /* getting dropdown value */
        var element = document.getElementById("mySelect");  
        var country = element.value;                        

        /* concatenate url for file request */
        var url = 'https://cors-anywhere.herokuapp.com/https://spotifycharts.com/regional/'+country+'/daily/latest/download';
        
        /* make get request */
        const Http = new XMLHttpRequest();
        Http.open("GET", url);
        Http.send();
         
        /* parse data */
        Http.onreadystatechange = (e) => {       
          var csv = Http.responseText;
          var lines = csv.split("\n");

          for (var i = 1; i < lines.length; i++) {
            document.getElementById("results").innerHTML += lines[i]+'<br>';            
          }          
          document.getElementById("results").innerHTML += '<hr>';            
        }
      }
    </script>

    

  </body> 


</html>